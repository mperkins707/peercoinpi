version: '3.6'
services:
  peercoinpi-web:
    image: nginx:latest
    volumes:
    - ./frontend/dist:/usr/share/nginx/html
    ports:
      - 8080:80
    networks:
    - peercoinpi
  peercoinpi-deamon:
    image: peercoin/peercoind:0.11.7
    volumes:
    - ./api:/peercoinpi
    - ./api/config/peercoin.conf:/root/.peercoin/peercoin.conf
    - ./blockchain/testnet:/root/.peercoin/testnet3
    networks:
    - peercoinpi
    command: bash -c "cd /peercoinpi && ./start_testnet.sh"
    ports:
      - 9904:9904
  peercoinpi-deamon-mainnet:
    image: peercoin/peercoind:0.11.7
    volumes:
    - ./api:/peercoinpi
    - ./api/config/peercoin.conf:/root/.peercoin/peercoin.conf
    - ./blockchain/main:/root/.peercoin
    networks:
    - peercoinpi
    command: bash -c "cd /peercoinpi && ./start_main.sh"
    ports:
      - 9902:9902
  peercoin-api:
    image: node:18.7.0
    networks:
      - peercoinpi
    volumes:
    - ./api/peercoinpi:/api
    ports:
      - "3000:3000"
    command: bash -c "cd /api && npm install && npm run start"

networks:
  peercoinpi:
    driver: bridge